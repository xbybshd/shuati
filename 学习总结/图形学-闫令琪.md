### 变换   
1.缩放  
2.旋转  
3.剪切
4.平移   平移变换加了一个维度的目的在于，可以用矩阵的第三列向量乘上被乘的向量第三维度的1，然后加在x或者y上，就可以实现平移  

### 非原点原地旋转   
先平移回原点，再旋转，再平移回去   

### 如果一个矩阵的逆矩阵等于转置那就是正交矩阵  

### 三个变换  MVP  
1.Model,被观察的物体变换  
2.View,相机的变换   
3.projection， 投影变换   



可以通过将相机固定到原点，就是把相机位置移动到原点，照相方向到-Z，相机向上朝向到y,y和z叉乘到x，此为view变换，然后物体也要view变换一次，
model变换是物体本身的变换

### 欧拉角  
总之万向节死锁会导致位置上连续变化 在数值表示上确是非连续的。给定的两个关键帧之间无法平滑过渡。顺便提一下解决方法，可以使用四元数球面线性插值(Slerp)


### opencv mingw编译踩坑  
如果不想自己编译，可以下别人弄好的，但是要把bin加入环境变量，不然动态库无法加载


### 坐标轴旋转是原来坐标轴上的点的旋转方式   
起始坐标轴在$(x,y,z)$,坐标为$(a_{1},a_{2},a_{3})$,如果我有另外一个坐标轴$(u,v,w)$,其中，$u=(x_{u},y_{u},z_{u})$,$v=(x_{v},y_{v},z_{v})$,$w=(x_{w},y_{w},z_{w})$,那么相对于$(u,v,w)$坐标轴，坐标为$(a_{1},a_{2},a_{3})$的点，其在$(x,y,z)$坐标上的位置为
$\left(
\begin{matrix}
x_{u} & x_{v} & x_{w} \\
y_{u} & y_{v} & y_{w} \\
z_{u} & z_{v} & z_{w}   
\end{matrix}
\right)$*
$\left(
\begin{matrix}
a_{1}  \\
a_{2} \\
a_{3}   
\end{matrix}
\right)$
这个表示也就是将$(x,y,z)$旋转到$(u,v,w)$时，前者上的点的变化方式   
所以将$(u,v,w)$旋转到$(x,y,z)$时的矩阵就是$(u,v,w)^{-1}$


### 正交变换  
我们观察一个东西都是在一个观察立方体里面，通过将这个立方体变换为
$[-1,1]*[-1,1]*[-1,1]$的一个单位立方体，这个过程中，计算出的矩阵，就可以用于观察立方体内部的变换，其思路是先移到原点，做缩放变换，再移到$[-1,1]$


### 透视变换  
物体有近平面和远平面，$(x',y',n)$,$n$是近平面的$z$,$(x,y,z)$,如果这个是一个长方体，则近处和远处的x和y都一样，但是在投影变换看来，远处的x，y要小，投影变换的目的是求出将远处的x，y，z投影到近平面时，应该怎么变化，按照道理来说x，y是要变小的，z在近平面和远平面是不变的，在中间会变小。  

按照相似三角形的结果，当远处z轴坐标为z时(注意：相似三角形的图只是描述远处坐标转换到屏幕上要变小，其在屏幕平面的坐标是要变小的，但是z不是在屏幕的n上)，$x,y$转换为  
$x'=\frac{n}{z} x,x,y'=\frac{n}{z} y$   
$\left(\begin{matrix}x \\ y \\z \\1\end{matrix}\right)  \Rightarrow  \left(\begin{matrix}nx/z \\ ny/z \\unknown \\1\end{matrix}\right) \Rightarrow  \left(\begin{matrix}nx \\ ny \\unknown \\z\end{matrix}\right)$  
我们希望找到这样一个矩阵完成此变换   
我们可以根据 x,y的前后变化值得出前两项的矩阵值  
$\left(\begin{matrix}
n&0&0&0\\
0&n&0&0\\
?&?&?&?\\
0&0&1&0  
\end{matrix}\right)$   

求出第三行需要用两个特例点  
1，所有近平面上的点的x,y,z都是不变
2.所有远平面上的点，z是不变的  
按照正常思路，第三行应该只有第三列和第四列  

我们可以根据 x,y的前后变化值得出前两项的矩阵值  
$\left(\begin{matrix}
n&0&0&0\\
0&n&0&0\\
?&?&A&B\\
0&0&1&0  
\end{matrix}\right)$   

带入近平面z=n，远平面z=f  
$An+B=n^{2}$  
$Af+B=f^{2}$  
$A=n+f,B=-nf$  
$\left(\begin{matrix}
n&0&0&0\\
0&n&0&0\\
0&0&n+f&-nf\\
0&0&1&0  
\end{matrix}\right)$   

###  旋转矩阵的理解  
旋转矩阵都是旋转点的，不是旋转向量的，旋转矩阵旋转的是原点到点的向量，以此向量为基础，计算垂直轴和平行轴的计算


### 叉乘和点乘的等效矩阵  
$A\times B$和$(A\cdot B)A$都是有等效矩阵的，目的是将B提取出来  
$A\times B=\left(\begin{matrix}
0&-A_{z}&A_{y}\\
A_{z}&0&-A_{x}\\
-A_{y}&A_{x}&0
\end{matrix}\right)B$  
$(A\cdot B)A=AA^TB$

### 绕任意过原点轴旋转的等效矩阵  
向量P绕A旋转$\theta$，A为单位向量  
将P投影到A，会得到两个分量，  
平行于A的  
$proj_{A}P=(A\cdot P)A$  
垂直于A的   
$prep_{A}P=P-(A\cdot P)A$  
当我们做旋转的时候，不需要改变平行分量，只需要将垂直分量旋转即可  
垂直分量的旋转矩阵类似一般的将处于x轴上一点旋转$\theta$，旋转后可表示为  
$(P-(A\cdot P)A)cos\theta+(A\times P)sin\theta$  
其中$A\times P$是长度与垂直分量相等，角度与垂直分量垂直的向量，刚好可以用来乘上$sin\theta$

所以总体的旋转之后的向量为  
$P'=P\cdot cos\theta+(A\cdot P)A(1-cos\theta)+(A\times P)sin\theta$

其中$A\times B$和$(A\cdot B)A$都是有等效矩阵，可将其替换然后将P提取出来  

### eigen3的vector库  
三元向量，x,y,z，四元向量，x,y,z,w，  
R = P.cwiseProduct(Q);    // R = P .* Q 对应点相乘