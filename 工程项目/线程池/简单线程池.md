# 简单线程池  
## 核心元素  
- 工作队列，即worker线程的队列，里面保存着worker线程，每个线程内执行worker函数，从任务队列拿到函数对象执行 
- 任务队列，即执行函数队列，增加任务的时候进队  
- 互斥锁，对任务队列和终止标志进行操作的时候，需要锁，条件变量也要与其配合  
- 条件变量，与锁配合，增加了主动通知和谓词检查的功能  

## 核心函数  
### 构造函数 
简单情况只需要输入线程数量，之后for循环创建std::thread，里面的函数用lambda表达式，再封装一层worker函数，线程就是执行worker函数，
while循环从任务队列获取函数对象执行。  
### 析构函数  
先加锁修改终止变量，再通知所有线程，唤醒他们的worker，最后全体join   
### worker函数  
无限循环，先获取锁，std::unique_lock,然后使用条件变量，wait，先获取锁，再判断谓词，成立了就释放锁往下走，失败了也释放锁等待。
如果终止标志切任务队列是空，那就回去，否则从任务队列拿一个函数对象开始执行，任务队列pop  
### enqueue或者submit函数  
- 首先构建一个packaged_task，这是一个将函数体和promise结合的类，函数体内使用lambda捕获函数和参数，注意完美转发，lambda内部invoke执行函数和参数，执行函数不能完美转发，但是参数包可以。
- 获取packaged_task的future，然后上锁，获取任务队列，将task包装一层lambda送入任务队列，解锁  
- 最后唤醒一个
